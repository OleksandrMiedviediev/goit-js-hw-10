{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction addLeadingZero(value) {\n  return value < 10 ? `0${value}` : value;\n}\n\nlet timerRunning = false;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  let userSelectedDate;\n\n  flatpickr('#datetime-picker', {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n\n      if (userSelectedDate < new Date()) {\n        iziToast.show({\n          message: 'Please choose a date in the future',\n          position: 'topCenter',\n          timeout: 5000,\n          backgroundColor: 'red',\n          theme: 'dark',\n          icon: 'icon-person',\n        });\n        disableStartButton();\n      } else {\n        enableStartButton();\n      }\n    },\n  });\n\n  function disableStartButton() {\n    const startButton = document.querySelector('[data-start]');\n    if (startButton) {\n      startButton.disabled = true;\n    }\n  }\n\n  function enableStartButton() {\n    const startButton = document.querySelector('[data-start]');\n    if (startButton && !timerRunning) {\n      startButton.disabled = false;\n    }\n  }\n\n  document.querySelector('[data-start]').addEventListener('click', function () {\n    startCountdown();\n    timerRunning = true;\n    disableStartButton();\n  });\n\n  function startCountdown() {\n    const startDate = new Date();\n    const endDate = userSelectedDate;\n\n    const updateInterval = setInterval(() => {\n      const currentTime = new Date();\n      const timeDifference = endDate - currentTime;\n\n      if (timeDifference <= 0) {\n        clearInterval(updateInterval);\n        updateTimerDisplay({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n        disableStartButton();\n      } else {\n        const timeRemaining = convertMs(timeDifference);\n        updateTimerDisplay(timeRemaining);\n      }\n    }, 1000);\n  }\n\n  function updateTimerDisplay({ days, hours, minutes, seconds }) {\n    const timerDays = document.querySelector('[data-days]');\n    const timerHours = document.querySelector('[data-hours]');\n    const timerMinutes = document.querySelector('[data-minutes]');\n    const timerSeconds = document.querySelector('[data-seconds]');\n\n    if (timerDays && timerHours && timerMinutes && timerSeconds) {\n      timerDays.textContent = addLeadingZero(days);\n      timerHours.textContent = addLeadingZero(hours);\n      timerMinutes.textContent = addLeadingZero(minutes);\n      timerSeconds.textContent = addLeadingZero(seconds);\n    }\n  }\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n  }\n});\n"],"names":["addLeadingZero","value","timerRunning","userSelectedDate","flatpickr","selectedDates","iziToast","disableStartButton","enableStartButton","startButton","startCountdown","endDate","updateInterval","timeDifference","updateTimerDisplay","timeRemaining","convertMs","days","hours","minutes","seconds","timerDays","timerHours","timerMinutes","timerSeconds","ms"],"mappings":"+IAKA,SAASA,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,IAAIA,CAAK,GAAKA,CACpC,CAEA,IAAIC,EAAe,GAEnB,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,IAAIC,EAEJC,EAAU,mBAAoB,CAC5B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAE9BF,EAAmB,IAAI,MACzBG,EAAS,KAAK,CACZ,QAAS,qCACT,SAAU,YACV,QAAS,IACT,gBAAiB,MACjB,MAAO,OACP,KAAM,aAChB,CAAS,EACDC,KAEAC,GAEH,CACL,CAAG,EAED,SAASD,GAAqB,CAC5B,MAAME,EAAc,SAAS,cAAc,cAAc,EACrDA,IACFA,EAAY,SAAW,GAE1B,CAED,SAASD,GAAoB,CAC3B,MAAMC,EAAc,SAAS,cAAc,cAAc,EACrDA,GAAe,CAACP,IAClBO,EAAY,SAAW,GAE1B,CAED,SAAS,cAAc,cAAc,EAAE,iBAAiB,QAAS,UAAY,CAC3EC,IACAR,EAAe,GACfK,GACJ,CAAG,EAED,SAASG,GAAiB,CAExB,MAAMC,EAAUR,EAEVS,EAAiB,YAAY,IAAM,CAEvC,MAAMC,EAAiBF,EADH,IAAI,KAGxB,GAAIE,GAAkB,EACpB,cAAcD,CAAc,EAC5BE,EAAmB,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAChEP,QACK,CACL,MAAMQ,EAAgBC,EAAUH,CAAc,EAC9CC,EAAmBC,CAAa,CACjC,CACF,EAAE,GAAI,CACR,CAED,SAASD,EAAmB,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7D,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAExDH,GAAaC,GAAcC,GAAgBC,IAC7CH,EAAU,YAAcrB,EAAeiB,CAAI,EAC3CK,EAAW,YAActB,EAAekB,CAAK,EAC7CK,EAAa,YAAcvB,EAAemB,CAAO,EACjDK,EAAa,YAAcxB,EAAeoB,CAAO,EAEpD,CAED,SAASJ,EAAUS,EAAI,CAMrB,MAAMR,EAAO,KAAK,MAAMQ,EAAK,KAAG,EAC1BP,EAAQ,KAAK,MAAOO,EAAK,MAAO,IAAI,EACpCN,EAAU,KAAK,MAAQM,EAAK,MAAO,KAAQ,GAAM,EACjDL,EAAU,KAAK,MAASK,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CACH,CAAC"}